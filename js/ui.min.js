tv.ui={};tv.ui.formatDate=function(e){if(e==null||e==undefined||e.length<10){return"Not specified"}var t=e.split("-");var n=t[2]+"-"+t[1]+"-"+t[0];return n};tv.ui.showSearchList=function(e){$("#searchList").html("");$("#searchHeading").html("Search Complete");if($(e).find("Series").length<1){$("#loadingBar").hide();$("#searchList").html('<li class="alert alert-warning"><h2>Nothing found</h2></li>');$("#searchList").show();return}$(e).find("Series").each(function(){var e='<li class="showInfo" data-val="'+$(this).find("seriesid").text()+'">'+'<a class="showLink" href="#">'+"<h4>"+$(this).find("SeriesName").text()+"</h4>"+"<h6>First Aired: "+tv.ui.formatDate($(this).find("FirstAired").text())+"</h6>"+'<p class="overview">'+$(this).find("Overview").text()+"</p>"+'<button data-id="'+$(this).find("seriesid").text()+'" class="addShowBtn btn btn-mini btn-info">Add Show</button>'+"</a></li>";$("#searchList").append(e)});$("#loadingBar").hide();$("#searchList").show()};tv.ui.renderShows=function(e){if(e===0){var t='<div class="span4"></div><div class="span4"><p>You have not added any show yet.</p>'+'<a class="btn btn-large btn-info" href="add.html">Add Now</a></div><div class="span4"></div>';$("#showHomeList").append(t);return}var t='<div class="shows span12" id="'+e.showid+'">'+'<div class="thumbnail">'+'<div class="row-fluid">'+'<div class="span2">'+'<img class="img-polaroid" id="img-'+e.showid+'" src="">'+"</div>"+'<div class="span10">'+'<div class="caption">'+'<div class="btn-group pull-left">'+'<button title="Options" class="btn btn-mini dropdown-toggle" data-toggle="dropdown"><span class="caret"</span></button>'+'<ul class="dropdown-menu">'+'<!--<li><a href="#" data-show="'+e.showid+'" class="fullInfo"><span class="icon icon-th-list"></span> Full Info</a></li>'+'<li><a href="#" data-show="'+e.showid+'" class="reUpdate"><span class="icon icon-refresh"></span> Re Update</a></li>-->'+'<li><a href="#" data-show="'+e.showid+'" class="deleteShow"><span class="icon icon-trash"></span> Delete Show</a></li>'+"</ul>"+"</div>"+'<p class="label label-info pull-right">'+e.day+" "+e.time+"</p>"+"<h3>"+e.name+"</h3>"+'<p class="overview">'+e.overview+"</p>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>";$("#showHomeList").append(t)};tv.ui.renderImg=function(e){$("#img-"+e.showid).attr("src",e.poster)};tv.ui.addShow=function(e){var t={};$(e).find("Series").each(function(){t.name=$(this).find("SeriesName").text();t.showid=$(this).find("id").text();t.overview=$(this).find("Overview").text();t.actors=$(this).find("Actors").text();t.day=$(this).find("Airs_DayOfWeek").text();t.time=$(this).find("Airs_Time").text();t.firstAired=$(this).find("FirstAired").text();t.genre=$(this).find("Genre").text();t.imdbid=$(this).find("IMDB_ID").text();t.rating=$(this).find("Rating").text();t.status=$(this).find("Status").text();t.banner=$(this).find("banner").text();t.fanart=$(this).find("fanart").text();t.poster=$(this).find("poster").text();t.lastUpdated=$(this).find("lastupdated").text();t.deleted=0});tv.indexedDB.addShow(t)};tv.ui.addEpisodes=function(e){var t={};$(e).find("Series").each(function(){t.showid=$(this).find("id").text();t.poster=$(this).find("poster").text();t.name=$(this).find("SeriesName").text()});var n=[];$(e).find("Episode").each(function(){var e={};e.name=$(this).find("EpisodeName").text();e.showname=t.name;e.showid=$(this).find("seriesid").text();e.episodeID=$(this).find("id").text();e.overview=$(this).find("Overview").text();e.guestStars=$(this).find("GuestStars").text();e.airdate=$(this).find("FirstAired").text();e.season=$(this).find("SeasonNumber").text();e.episode=$(this).find("EpisodeNumber").text();e.lastUpdated=$(this).find("lastupdated").text();n.push(e)});tv.indexedDB.addEpisodes(n,t)};tv.ui.renderHome=function(){$("#showHomeList").html("");tv.indexedDB.getAllShows()};tv.ui.getDataUrl=function(e){var t=document.createElement("canvas");t.width=e.width;t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0);var r=t.toDataURL("image/jpeg");return r};tv.ui.renderPopup=function(e){if(e==0){var t='<li class="showInfo"><a class="showLink" href="#"><h4>No Show Today</h4></a></li>';$("#todayList").html(t);return}if(e.season<10){e.season="0"+e.season}if(e.episode<10){e.episode="0"+e.episode}var t='<li class="showInfo" id="'+e.episodeID+'">'+'<a class="showLink" href="#'+e.episodeID+'">'+"<h4>"+e.showname+"</h4>"+"<h6>"+e.name+" (s"+e.season+"e"+e.episode+")</h6>"+'<p class="overview">'+e.overview+"</p>"+"</a>"+"</li>";$("#todayList").append(t)};tv.ui.renderUpcoming=function(e){if(e.season<10)e.season="0"+e.season;if(e.episode<10)e.episode="0"+e.episode;if(e.name.toLowerCase()=="tba"||e.name=="")e.name=="To Be Announced";if(e.overview.toLowerCase()=="tba"||e.overview=="")e.overview=="To Be Announced";var t='<div class="upcoming span12" id="'+e.episodeID+'">'+'<div class="thumbnail">'+'<div class="caption">'+'<p class="pull-right">s<b>'+e.season+"</b>e<b>"+e.episode+"</b>  ---- <b>"+tv.ui.formatDate(e.airdate)+"</b></p>"+"<h3>"+e.showname+"</h3>"+"<p><b>"+e.name+'</b><a href="#" class="updateEpi btn btn-mini btn-inverse pull-right" data-show="'+e.showname+'" data-id="'+e.episodeID+'">Update Info</a></p>'+"<p>"+e.overview+"</p>"+"</div>"+"</div>"+"</div>";$("#upcomingList").append(t)};tv.ui.getDate=function(e){if(e==null){e=0}var t="";var n=new Date;n.setDate(n.getDate()+e);var r=n.getDate();var i=n.getMonth()+1;var s=n.getFullYear();if(r<10){r="0"+r}if(i<10){i="0"+i}t=s+"-"+i+"-"+r;return t}